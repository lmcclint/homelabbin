{
	# Global options
	# Optional: enable admin API only on loopback
	# admin localhost:2019
	email {$ACME_EMAIL}
	# Use Porkbun DNS-01 for ACME challenges
	acme_dns porkbun {
		api_key {env.PORKBUN_API_KEY}
		api_secret_key {env.PORKBUN_API_SECRET_KEY}
	}
}

# Option A: wildcard vhost covering *.lab.2bit.name (recommended if youâ€™ll add more apps)
*.lab.2bit.name {
	encode zstd gzip
	header {
		X-Frame-Options "SAMEORIGIN"
		X-Content-Type-Options "nosniff"
		Referrer-Policy "no-referrer-when-downgrade"
	}

	@git host git.lab.2bit.name
	handle @git {
		reverse_proxy http://{$GITEA_UPSTREAM_HTTP_ADDR:-10.20.60.11}:3000
	}

	# default 404 for unknown hosts under the wildcard
	respond 404
}

# Option B: individual site (uncomment if you prefer per-host blocks)
# {$GITEA_FQDN} {
# 	encode zstd gzip
# 	reverse_proxy http://{$GITEA_UPSTREAM_HTTP_ADDR:-10.20.60.11}:3000
# }
